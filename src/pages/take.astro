---
// Redirect from /take to /api/take with all query parameters
const url = new URL(Astro.request.url);
const searchParams = url.searchParams.toString();
const redirectUrl = `/api/take${searchParams ? searchParams.startsWith('?') ? searchParams : `?${searchParams}` : ''}`;

return Astro.redirect(redirectUrl, 302);
--- 